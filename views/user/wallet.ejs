<%- include('../essentials/userHeader') %> <%-
include('../essentials/userLayout') %>

<main id="main" class="main" style="top: 300px">
  <!-- <div class="pagetitle">
      <h1>Dashboard</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/admin/panel">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </nav>
    </div> -->
  <%if(wallet){%>
  <section class="section dashboard position-relative" style="top: 70px">
    <div class="row d-flex justify-content-center">
      <div class="col-10 mt-5">
        <div class="card">
          <div class="card-body px-0">
            <h1 class="ps-3 pt-2 fw-bolder">My wallet</h1>
            <div class="overflow-auto" style="height: 300px">
              <table
                class="table table-striped table-group-divider table-hover overflow-auto"
              >
                <thead class="table-warning">
                  <tr>
                    <th>Serial No</th>
                    <th>type</th>
                    <th>Date</th>
                    <th style="width: 150px">Amount</th>
                  </tr>
                </thead>
                <tbody class="table-group-divider">
                  <%wallet.transactions.forEach((item,index)=>{ %>
                  <tr class="align-middle">
                    <td class="ps-4"><%= index+1 %></td>
                    <td><%= item.type %></td>
                    <td>
                      <%= item.date.toLocaleString('en-US', { dateStyle: 'long'
                      }) %>
                    </td>
                    <% if(item.type == 'purchase'){ %>
                    <td class="text-danger fw-bold">- <%= item.amount %></td>
                    <%} else{ %>
                    <td class="text-success fw-bold">+ <%= item.amount %></td>
                    <% } %>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>

            <div class="d-flex justify-content-between mt-4 mx-3">
              <h5 class="fw-bold">Wallet Balance</h5>
              <h5>â‚¹<%= wallet.balance.toLocaleString('hi') %></h5>
            </div>
            <%}else{%>
            <div class="d-flex justify-content-center align-items-center">
              You have no wallet
            </div>
          </div>
        </div>
      </div>
      <!-- End Left side columns -->
    </div>
  </section>
  <%} %>
</main>
<!-- End #main -->

<!-- Footer Start -->

<!-- Footer End -->
<script
  src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
  crossorigin="anonymous"
></script>

<!-- Back to Top -->
<button href="#" class="btn btn-primary back-to-top">
  <i class="fa fa-angle-double-up"></i>
</button>
<script type="module" src="/js/cartCount.js" defer></script>

<!-- JavaScript Libraries -->
<%- include('../essentials/userFooter') %>
